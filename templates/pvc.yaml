{{- range $name, $comp := .Values.components }}
{{- if and $comp.pvc $comp.pvc.storage }}
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: {{ $name }}-pvc
spec:
  accessModes: [ "ReadWriteOnce" ]
  resources:
    requests:
      storage: {{ $comp.pvc.storage }}
{{- end }}
{{- end }}
